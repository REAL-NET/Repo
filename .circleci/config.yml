version: 2.1
orbs:
  win: circleci/windows@1.0.0
jobs:
  build:
    executor:
      name: win/vs2019
      shell: powershell.exe
    steps:
      - run:
        name: "Install dotnet 5"      
        command: https://dotnet.microsoft.com/download/dotnet-core/scripts/v1/dotnet-install.ps1
      - checkout
      - run:
          name: "Install project dependencies"
          command: dotnet.exe restore
      - run:
          name: "Run Build step"
          command: dotnet.exe build
      - run:
          name: "Test the executable"
          command: dotnet.exe test
